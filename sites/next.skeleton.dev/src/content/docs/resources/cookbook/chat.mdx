---
layout: '@layouts/LayoutDoc.astro'
title: Chat
description: Create a custom chat feed or AI prompt interface.
showDocsUrl: true
pubDate: 2024-11-19
tags: ['presentation', 'machine learning']
---

export const components = componentSet;

import Example from '@examples/resources/cookbook/chat/Example.svelte';
import ExampleRaw from '@examples/resources/cookbook/chat/Example.svelte?raw';
import ExampleColumns from '@examples/resources/cookbook/chat/ExampleColumns.astro';
import ExampleColumnsRaw from '@examples/resources/cookbook/chat/ExampleColumns.astro?raw';
import ExampleRows from '@examples/resources/cookbook/chat/ExampleRows.astro';
import ExampleRowsRaw from '@examples/resources/cookbook/chat/ExampleRows.astro?raw';
import ExampleFeed from '@examples/resources/cookbook/chat/ExampleFeed.astro';
import ExampleFeedRaw from '@examples/resources/cookbook/chat/ExampleFeed.astro?raw';
import ExampleBubbles from '@examples/resources/cookbook/chat/ExampleBubbles.astro';
import ExampleBubblesRaw from '@examples/resources/cookbook/chat/ExampleBubbles.astro?raw';

<Preview client:visible>
	<Fragment slot="preview">
		<Example client:visible />
	</Fragment>
	<Fragment slot="code">
		<div class="card preset-outlined-warning-500 p-8 space-y-8 mb-4">
			<p>The example below has been constructed using <strong>Svelte</strong>. Other frameworks will be available in the future.</p>
		</div>
		<Code code={ExampleRaw} lang="svelte" />
	</Fragment>
</Preview>

## Layout Columns

We recommend using Tailwind's [grid column](https://tailwindcss.com/docs/grid-template-columns) utility classes to define horizontal columns for your layout.

<Preview client:visible>
	<Fragment slot="preview">
		<ExampleColumns />
	</Fragment>
	<Fragment slot="code">
		<Code code={ExampleColumnsRaw} lang="astro" />
	</Fragment>
</Preview>

## Layout Rows

We recommend using Tailwind's [grid row](https://tailwindcss.com/docs/grid-template-rows) utility classes to define vertical layout rows for your layout.

<Preview client:visible>
	<Fragment slot="preview">
		<ExampleRows />
	</Fragment>
	<Fragment slot="code">
		<Code code={ExampleRowsRaw} lang="astro" />
	</Fragment>
</Preview>

## Message Feed

Within our feed element, we'll generate a feed of messages. Note that we'll replace the `<pre>` tags in the next example.

<Preview client:visible>
	<Fragment slot="preview">
		<ExampleFeed />
	</Fragment>
	<Fragment slot="code">
		<Code code={ExampleFeedRaw} lang="astro" />
	</Fragment>
</Preview>

## Message Bubbles

By mixing Skeleton features with Tailwind styling, we can provided message bubble interfaces for each type of feed post.

<Preview client:visible>
	<Fragment slot="preview">
		<ExampleBubbles />
	</Fragment>
	<Fragment slot="code">
		<Code code={ExampleBubblesRaw} lang="astro" />
	</Fragment>
</Preview>

## Prompt

We can utilize a Skeleton [input group](/docs/tailwind/forms#groups) styles to create a custom text prompt.

---

## Scroll to Bottom

Bind your scrollable feed panel element reference ([Svelte](https://svelte.dev/docs/svelte/bind) | [React](https://react.dev/learn/referencing-values-with-refs#refs-and-the-dom)), then use [scrollTo](https://developer.mozilla.org/en-US/docs/Web/API/Element/scrollTo) to scroll the panel to the bottom on demand. Scroll behavior can be set via `behavior: 'smooth'`.

```ts
function scrollChatBottom(behavior?: ScrollBehavior = 'smooth') {
	// `elemChat` represents our scrollable panel element
	elemChat.scrollTo({ top: elemChat.scrollHeight, behavior });
}
```

## Add a Message

Below we'll cover how to append the message feed with a new message from the host user. Per our above examples, we'll use the same `messageFeed` data structure.

```ts
let messageFeed = [ /* ...*/ ];
```

Then bind to the textarea for your prompt in order to capture any message typed by the user.

```ts
// Svelte Element Reference
let elemPrompt: HTMLElement;
// React Element Reference
let elemPrompt: HTMLElement = useRef();
```
```svelte
<!-- Svelte Binding --->
<textarea bind:value={elemPrompt} ... />
<!-- React Binding --->
<textarea ref={elemPrompt} ... />
```

Here's an example of how we might append a new message to the `messageFeed` array.

```ts
function addMessage(): void {
	const newMessage = {
		id: messageFeed.length,
		host: true,
		avatar: 48,
		name: 'Jane',
		timestamp: new date(),
		message: elemPrompt.value,
		color: 'preset-tonal-primary'
	};
	// Append the new message to the message feed
	messageFeed = [...messageFeed, newMessage];
	// Clear the textarea message
	elemPrompt.value = '';
	// Smoothly scroll to the bottom of the feed
	setTimeout(() => { scrollChatBottom('smooth'); }, 0);
}
```

This can be triggered when the prompt's SEND button is clicked.

```svelte
<button ... onclick={addMessage}>Send</button>
```
