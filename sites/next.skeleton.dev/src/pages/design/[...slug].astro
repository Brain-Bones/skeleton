---
import type { GetStaticPaths } from 'astro'
import { getCollection } from 'astro:content'
import { getEntry } from 'astro:content'

export const getStaticPaths = (async () => {
    const pages = await getCollection('design')
    return pages.map(({ slug }) => {
        return {
            params: { slug },
        }
    })
}) satisfies GetStaticPaths

// Get the slug from the incoming server request
const { slug } = Astro.params

// Query based on the slug
const entry = await getEntry('design', slug)

// Handle 404 not found
if (entry === undefined) return Astro.redirect('/404')

// Render the entry to HTML in the template
const { Content } = await entry.render()
---

<Content />
