---
import { Menu as IconMenu, X as IconClose } from 'lucide-react';
// import Lightswitch from './Lightswitch.astro';
// import ThemeSwitch from './ThemeSwitch.astro';

interface DrawerProps {
	navigation?: {
		href: string;
		label: string;
		target: string;
	}[];
	base?: string;
	classes?: string;
}

const {
	navigation = [],
	base = 'xl:hidden preset-filled-surface-100-900 shadow-xl fixed top-0 left-0 bottom-0 z-50 w-[320px] p-4 pb-24 space-y-10 overflow-y-auto transition-transform duration-100 -translate-x-[320px]',
	classes = ''
}: DrawerProps = Astro.props;
---

{/* Drawer */}
<div class={`${base} ${classes}`} id="drawer">
	<!-- Header -->
	<header class="flex justify-between items-center">
		<h2 class="h3">Skeleton</h2>
		<button class="btn-icon" data-drawer-toggle>
			<IconClose />
		</button>
	</header>
	<!-- Theme / Lightswitch -->
	<!-- <div class="grid grid-cols-[1fr_auto] gap-4 items-center">
		<ThemeSwitch />
		<Lightswitch />
	</div> -->
	<!-- Navigation -->
	<nav class="flex flex-col gap-2">
		<span class="font-bold capitalize">Navigate</span>
		<a class="anchor" href={`/`} title="Homepage">Home</a>
		{
			navigation.map((link) => (
				<a class="anchor hover:underline" href={link.href} target={link.target}>
					{link.label}
				</a>
			))
		}
	</nav>
	<!-- Slot -->
	<slot />
</div>

{/* Hamburger Menu */}
<button class="xl:hidden btn-icon" data-drawer-toggle>
	<IconMenu />
</button>

<script is:inline>
	const elemDrawer = document.querySelector('#drawer');
	const elemTriggersList = document.querySelectorAll('[data-drawer-toggle], #drawer button, #drawer a');

	// For each toggleable element
	elemTriggersList.forEach((elem) => {
		// Add a click listener
		elem?.addEventListener('click', () => {
			// Toggle the translation-x class
			elemDrawer?.classList.toggle('-translate-x-[320px]');
		});
	});
</script>
