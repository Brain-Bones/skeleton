---
import { getCollection, type CollectionEntry } from 'astro:content';

const collection = 'docs';
const path = 'resources/cookbook/';

// Get Collection
const tableData = await getCollection(collection, (item) => {
	if (item.slug.includes(path)) return item;
});
---

<div class="table-wrap">
	<table class="table">
		<tbody class="hover:[&>tr]:preset-tonal">
			{
				tableData.map((row) => (
					<tr title={row.data.description}>
						<td class="font-bold">{row.data.title}</td>
						<td>
							<div class="flex flex-wrap gap-2">
								{row.data.tags?.map((tag) => (
									<span class="chip preset-tonal-primary">{tag}</span>
								))}
							</div>
						</td>
						<td class="text-right type-scale-1 opacity-60">{row.data.pubDate?.toLocaleDateString()}</td>
						<td class="text-right">
							<a href={`/${collection}/${row.slug}`} class="btn preset-tonal hover:preset-filled">
								Explore &rarr;
							</a>
						</td>
					</tr>
				))
			}
		</tbody>
	</table>
</div>

<!-- <pre class="pre">{JSON.stringify(tableData, null, 2)}</pre> -->
